<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Whale Tracker</title>
    <style>
        body {
            font-family: 'Roboto', sans-serif;
            margin: 0;
            padding: 0;
            background: linear-gradient(to right, #141E30, #243B55);
            color: #FFFFFF;
            overflow-x: hidden;
        }

        .container {
            max-width: 1000px;
            margin: 50px auto;
            background: rgba(255, 255, 255, 0.1);
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        }

        h1 {
            text-align: center;
            font-size: 2.5em;
            text-transform: uppercase;
            margin-bottom: 20px;
            letter-spacing: 3px;
            color: #00C9FF;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }

        table th, table td {
            border: 1px solid rgba(255, 255, 255, 0.2);
            padding: 10px;
            text-align: left;
            color: #E0E0E0;
        }

        table th {
            background: linear-gradient(to right, #36D1DC, #5B86E5);
            color: #FFFFFF;
            text-transform: uppercase;
            letter-spacing: 1px;
            border: none;
        }

        table tr:nth-child(even) {
            background-color: rgba(255, 255, 255, 0.05);
        }

        table tr:hover {
            background: rgba(255, 255, 255, 0.15);
        }

        table td {
            font-size: 1.1em;
        }

        .footer {
            text-align: center;
            margin-top: 50px;
            font-size: 0.9em;
            color: #B0BEC5;
        }

        .footer a {
            color: #00C9FF;
            text-decoration: none;
        }

        .footer a:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Whale Tracker</h1>
        <table id="walletTable">
            <thead>
                <tr>
                    <th>Wallet Name</th>
                    <th>Address</th>
                    <th>Balance (SOL)</th>
                    <th>Last Purchased Coin</th>
                </tr>
            </thead>
            <tbody>
                <!-- Wallet rows will be populated here -->
            </tbody>
        </table>
    </div>

    <div class="footer">
        Powered by <a href="https://solana.com/" target="_blank">Solana Blockchain</a>
    </div>

    <script>
        const wallets = [
            { address: "H2xhatnRoZTeKyySd5fkF98Q27k1rsU9M1TXQyUsqoaq", name: "Ray" },
            { address: "8deJ9xeUvXSJwicYptA9mHsU2rN2pDx37KWzkDkEXhU6", name: "Cooker" },
            { address: "4Be9CvxqHW6BYiRAxW9Q3xu1ycTMWaL5z8NX4HR3ha7t", name: "Mitch" },
            // Add more wallets as needed
        ];

        async function fetchBalance(address) {
            try {
                const response = await fetch("https://api.mainnet-beta.solana.com", {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify({
                        jsonrpc: "2.0",
                        id: 1,
                        method: "getBalance",
                        params: [address]
                    })
                });

                const data = await response.json();
                return data.result ? (data.result.value / 1e9).toFixed(2) : "Error"; // Convert lamports to SOL
            } catch (error) {
                console.error(`Error fetching balance for ${address}:`, error);
                return "Error";
            }
        }

        async function fetchLastPurchasedCoin(walletAddress) {
            try {
                const response = await fetch("https://api.mainnet-beta.solana.com", {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify({
                        jsonrpc: "2.0",
                        id: 1,
                        method: "getSignaturesForAddress",
                        params: [walletAddress, { limit: 1 }]
                    })
                });

                const data = await response.json();
                if (data.result && data.result.length > 0) {
                    const transactionResponse = await fetch("https://api.mainnet-beta.solana.com", {
                        method: "POST",
                        headers: { "Content-Type": "application/json" },
                        body: JSON.stringify({
                            jsonrpc: "2.0",
                            id: 1,
                            method: "getTransaction",
                            params: [data.result[0].signature]
                        })
                    });

                    const transactionData = await transactionResponse.json();
                    if (transactionData.result && transactionData.result.meta) {
                        return transactionData.result.transaction.message.accountKeys[0]; // Adjust as needed
                    }
                }
                return "No recent purchases";
            } catch (error) {
                console.error(`Error fetching last purchased coin for ${walletAddress}:`, error);
                return "Error";
            }
        }

        async function populateTable() {
            const tbody = document.querySelector("#walletTable tbody");

            for (const wallet of wallets) {
                const balance = await fetchBalance(wallet.address);
                const lastPurchasedCoin = await fetchLastPurchasedCoin(wallet.address);

                const row = document.createElement("tr");
                row.innerHTML = `
                    <td>${wallet.name}</td>
                    <td>${wallet.address}</td>
                    <td>${balance}</td>
                    <td>${lastPurchasedCoin}</td>
                `;
                tbody.appendChild(row);
            }
        }

        populateTable();
    </script>
</body>
</html>
